<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <link rel="stylesheet" href="css styles/rps.css">
        <link rel="stylesheet" href="css styles/general.css">
    </head>
    <body >

        <p>
            Rock paper Scissors
        </p>

        <p class="p-win-lose">
        </p>

        <p class="p-choices">

        </p>

        <p class="win-loss-ties">
            Wins: 0, Losses: 0, Ties: 0
        </p>
        
        <button class="emoji-button"
        onclick="
        setRandomChoice();
        userChoice = 0;
        changeResult();">
            <img src="imgs/rock-emoji.png" alt="" class="emoji">
        </button>

        <button class="emoji-button"
        onclick="
        setRandomChoice();
        userChoice = 1;
        changeResult();">
            <img src="imgs/paper-emoji.png" class="emoji">
        </button>

        <button class="emoji-button"
        onclick="
        setRandomChoice();
        userChoice = 2;
        changeResult();">
            <img src="imgs/scissors-emoji.png" alt="" class="emoji">
        </button>

        <br></br>

        <button class = 'reset-score-btn' onclick="resetScore()
        ">Reset Score</button>

        <script>
            let userChoice =-1;
            let randomChoice = -1;
            const score = JSON.parse(localStorage.getItem('score')) || {
                    Win:0,
                    Losses:0,
                    Ties:0
                }

            console.log(score)



            function setRandomChoice(){
                ran = Math.round(Math.random() * 100);

                if (ran <= 30 && ran>=0){randomChoice = 0;}
                else if (ran <= 60 && ran>30){randomChoice = 1;}
                else if (ran >60){randomChoice = 2;}



            }

            function returnAlertString(playerOrCompChoice){
                if (playerOrCompChoice === 0){
                    return 'Rock';
                }

                else if (playerOrCompChoice === 1){
                    return 'Paper';
                }

                else if (playerOrCompChoice === 2){
                    return 'Scissorss';
                }
                
            }

            function checkWin(){


                if (userChoice ===0 && randomChoice === 0){score.Ties+=1; return 'Draw';}
                else if(userChoice === 1 && randomChoice === 1){score.Ties+=1; return 'Draw';}
                else if(userChoice === 2 && randomChoice === 2){score.Ties+=1; return 'Draw';}

        
                else if(userChoice === 0 && randomChoice === 1){score.Losses+=1; return 'Computer Wins!';}
                else if(userChoice === 0 && randomChoice === 2){score.Win+=1; return 'You Win!';}

                else if(userChoice === 1 && randomChoice === 2){score.Win+=1; return 'You Win!';}
                else if(userChoice === 1 && randomChoice === 3){score.Losses+=1; return 'Computer Wins!';}

                else if(userChoice === 2 && randomChoice === 1){score.Win+=1; return 'You Win!';}
                else if(userChoice === 2 && randomChoice === 3){score.Losses+=1; return 'Computer Wins!';}

                else if(userChoice === 1 && randomChoice === 0){score.Win+=1; return 'You Win!';}
                else if(userChoice === 2 && randomChoice === 0){score.Losses+=1; return 'Computer Wins!';}

                
            }

            function initResult(){
                document.querySelector('.win-loss-ties').innerHTML = `Wins: ${score.Win}, Losses: ${score.Losses}, Ties: ${score.Ties}`

            }
            
            function changeResult(){
                document.querySelector('.p-win-lose').innerHTML = checkWin()

                document.querySelector('.p-choices').innerHTML = `You: ${returnAlertString(userChoice)} <br></br> Computer: ${returnAlertString(randomChoice)}`
                
                document.querySelector('.win-loss-ties').innerHTML = `Wins: ${score.Win}, Losses: ${score.Losses}, Ties: ${score.Ties}`

                localStorage.setItem('score', JSON.stringify(score));

                

            }

            function resetScore(){
                score.Win = 0
                score.Losses = 0
                score.Ties = 0
                
                localStorage.setItem('score', JSON.stringify(score));
                document.querySelector('.win-loss-ties').innerHTML = `Wins: ${score.Win}, Losses: ${score.Losses}, Ties: ${score.Ties}`
                console.log(score)

            }

            initResult()

        </script>
    </body>

</html>